# /chat clientId 재현 테스트 절차

다음 시나리오를 로컬/스테이징에서 차례로 검증합니다.

1. **로그인 사용자 동일성 보장**
   - 기기 A에서 카카오 로그인 후 `/chat`에서 새 대화를 생성합니다.
   - 기기 B(다른 브라우저)에서 같은 카카오로 로그인합니다.
   - `/chat` 세션 목록에 A에서 만든 세션이 표시되고 이어서 대화가 가능해야 합니다.

2. **비회원 분리**
   - 기기 A(비로그인)에서 `/chat` 대화를 생성합니다.
   - 기기 B(비로그인, 다른 브라우저)에서 `/chat`을 열어도 A의 대화가 보이지 않아야 합니다.

3. **공용 PC 안전장치**
   - 브라우저에서 비로그인 상태로 `/chat` 대화를 생성한 뒤 브라우저를 그대로 둡니다.
   - 같은 브라우저에서 다른 사용자가 카카오 로그인합니다.
   - 로그인 후 `/chat`에서 이전 비회원 대화가 노출되지 않아야 합니다(자동 병합 금지).

4. **세션 쓰기 방어**
   - 다른 clientId로 생성된 `sessionId`를 추출한 뒤, 해당 `sessionId`로 `/api/chat/save` POST를 시도합니다.
   - 응답이 `403 Forbidden`으로 반환되어야 합니다.

> 참고: `/api/chat/save` GET은 `Cache-Control: no-store` 헤더가 설정되어 브라우저/프록시 캐시에 남지 않습니다.
