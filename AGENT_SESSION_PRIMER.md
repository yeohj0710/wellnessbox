# Agent Session Primer

Auto-generated by `scripts/agent/generate-session-primer.cts`.
Run `npm run agent:context-refresh` (or `npm run agent:session-primer`) to refresh.

## Fast Start

1. `npm run audit:encoding`
2. `npm run audit:hotspots`
3. `npm run agent:guard-map`
4. `npm run lint`
5. `npm run build`

## Guard Snapshot

- Total routes: **83**
- Guarded routes: **51**
- Expected session-managed routes: **6**
- Unexpected review needed: **0**
- Missing method exports: **0**
- Public/Internal candidate routes: **26**
- Guard policy violations: **0**

## Runtime File Hotspots (Top 12)

- 3729 lines: `lib/rnd/ai-training/pipeline.ts`
-  787 lines: `app/(features)/employee-report/EmployeeReportClient.tsx`
-  711 lines: `app/(admin)/admin/b2b-reports/B2bAdminReportClient.tsx`
-  709 lines: `app/(components)/landingSection2.tsx`
-  551 lines: `lib/ai/chain.ts`
-  536 lines: `app/(components)/homeProductSection.tsx`
-  512 lines: `lib/b2b/export/layout-dsl.ts`
-  489 lines: `app/my-data/myDataPageSections.tsx`
-  487 lines: `public/scripts/google-translate-orchestrator.js`
-  477 lines: `components/b2b/ReportSummaryCards.tsx`
-  469 lines: `lib/agent-playground/patterns.ts`
-  466 lines: `app/agent-playground/page.tsx`

## Runtime Function Hotspots (Top 12)

-  732 lines: `EmployeeReportClient` (`app/(features)/employee-report/EmployeeReportClient.tsx:55`)
-  732 lines: `trainAllRndAiModels` (`lib/rnd/ai-training/pipeline.ts:2997`)
-  680 lines: `LandingSection2` (`app/(components)/landingSection2.tsx:29`)
-  658 lines: `B2bAdminReportClient` (`app/(admin)/admin/b2b-reports/B2bAdminReportClient.tsx:53`)
-  460 lines: `HomeProductSection` (`app/(components)/homeProductSection.tsx:76`)
-  417 lines: `ReportSummaryCards` (`components/b2b/ReportSummaryCards.tsx:60`)
-  399 lines: `EditorAdminClient` (`app/(admin)/admin/column/editor/EditorAdminClient.tsx:44`)
-  377 lines: `Cart` (`components/order/cart.tsx:45`)
-  374 lines: `RecommendedProductActions` (`app/chat/components/RecommendedProductActions.tsx:26`)
-  365 lines: `useAssessFlow` (`app/assess/useAssessFlow.ts:29`)
-  355 lines: `ProductManager` (`components/manager/productManager.tsx:14`)
-  350 lines: `PharmacyProductManager` (`components/manager/pharmacyProductManager.tsx:18`)

## Critical Edit Invariants

- Order integrity: keep stock decrement only inside `lib/order/mutations.ts:createOrder` transaction.
- Route ownership/auth: use guards from `lib/server/route-auth.ts` only.
- Prisma: keep singleton pattern in `lib/db.ts`.
- Admin gate: keep `app/api/verify-password/route.ts`, `lib/admin-token.ts`, and `middleware.ts` aligned.
