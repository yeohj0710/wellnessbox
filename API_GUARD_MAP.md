# API Guard Map

Auto-generated by `scripts/agent/generate-api-guard-map.cts`.
Run `npm run agent:guard-map` to refresh this report.
Generated at: `2026-02-27T01:02:52.276Z`

## Summary

- Total routes: **83**
- Guarded routes: **21**
- Expected session-managed routes: **0**
- Unexpected review needed: **0**
- Public/Internal candidate routes: **62**

- `Unexpected review needed` means route-auth import or direct `getSession()` is present but route policy does not explain the route yet.

## Unexpected Review Needed

| Route | Methods | Guards | Session Access | Note | File |
|---|---|---|---|---|---|

## Expected Session-Managed Routes

| Route | Methods | Guards | Session Access | Note | File |
|---|---|---|---|---|---|

## Public Or Internal Candidates

| Route | Methods | Guards | Session Access | Note | File |
|---|---|---|---|---|---|
| `/api/admin/b2b/employees` | - | - | `none` | - | `app/api/admin/b2b/employees/route.ts` |
| `/api/admin/b2b/employees/[employeeId]` | - | - | `none` | - | `app/api/admin/b2b/employees/[employeeId]/route.ts` |
| `/api/admin/b2b/employees/[employeeId]/analysis` | - | - | `none` | - | `app/api/admin/b2b/employees/[employeeId]/analysis/route.ts` |
| `/api/admin/b2b/employees/[employeeId]/note` | - | - | `none` | - | `app/api/admin/b2b/employees/[employeeId]/note/route.ts` |
| `/api/admin/b2b/employees/[employeeId]/report` | - | - | `none` | - | `app/api/admin/b2b/employees/[employeeId]/report/route.ts` |
| `/api/admin/b2b/employees/[employeeId]/survey` | - | - | `none` | - | `app/api/admin/b2b/employees/[employeeId]/survey/route.ts` |
| `/api/admin/b2b/reports/[reportId]/export/pdf` | `GET` | - | `none` | - | `app/api/admin/b2b/reports/[reportId]/export/pdf/route.ts` |
| `/api/admin/b2b/reports/[reportId]/export/pptx` | `GET` | - | `none` | - | `app/api/admin/b2b/reports/[reportId]/export/pptx/route.ts` |
| `/api/admin/b2b/reports/[reportId]/meta` | - | - | `none` | - | `app/api/admin/b2b/reports/[reportId]/meta/route.ts` |
| `/api/admin/b2b/reports/[reportId]/validation` | `GET` | - | `none` | - | `app/api/admin/b2b/reports/[reportId]/validation/route.ts` |
| `/api/admin/column/posts` | - | - | `none` | - | `app/api/admin/column/posts/route.ts` |
| `/api/admin/column/posts/[id]` | - | - | `none` | - | `app/api/admin/column/posts/[id]/route.ts` |
| `/api/admin/column/posts/[id]/publish` | - | - | `none` | - | `app/api/admin/column/posts/[id]/publish/route.ts` |
| `/api/assess/save` | `POST` | - | `none` | - | `app/api/assess/save/route.ts` |
| `/api/auth/kakao/callback` | `GET` | - | `none` | OAuth callback route that sets login session after provider redirect. | `app/api/auth/kakao/callback/route.ts` |
| `/api/auth/kakao/complete/[token]` | `GET` | - | `none` | One-time token completion route that finalizes login session. | `app/api/auth/kakao/complete/[token]/route.ts` |
| `/api/auth/kakao/login` | `GET` | - | `none` | - | `app/api/auth/kakao/login/route.ts` |
| `/api/auth/kakao/login/app` | `GET` | - | `none` | - | `app/api/auth/kakao/login/app/route.ts` |
| `/api/auth/login-status` | `GET` | - | `none` | Read-only route that reports current session status to UI. | `app/api/auth/login-status/route.ts` |
| `/api/auth/logout` | `GET, POST` | - | `none` | Logout route that clears session cookies. | `app/api/auth/logout/route.ts` |
| `/api/auth/phone/send-otp` | `POST` | - | `none` | - | `app/api/auth/phone/send-otp/route.ts` |
| `/api/auth/phone/verify-otp` | `POST` | - | `none` | - | `app/api/auth/phone/verify-otp/route.ts` |
| `/api/b2b/employee/report` | - | - | `none` | - | `app/api/b2b/employee/report/route.ts` |
| `/api/b2b/employee/report/export/pdf` | `GET` | - | `none` | - | `app/api/b2b/employee/report/export/pdf/route.ts` |
| `/api/b2b/employee/session` | - | - | `none` | - | `app/api/b2b/employee/session/route.ts` |
| `/api/c-section-score` | `POST` | - | `none` | - | `app/api/c-section-score/route.ts` |
| `/api/cart-products` | `POST` | - | `none` | - | `app/api/cart-products/route.ts` |
| `/api/categories` | `GET` | - | `none` | - | `app/api/categories/route.ts` |
| `/api/chat` | `POST` | - | `none` | - | `app/api/chat/route.ts` |
| `/api/chat/actions` | `POST` | - | `none` | - | `app/api/chat/actions/route.ts` |
| `/api/chat/delete` | `POST` | - | `none` | - | `app/api/chat/delete/route.ts` |
| `/api/chat/save` | `GET, POST` | - | `none` | - | `app/api/chat/save/route.ts` |
| `/api/chat/suggest` | `POST` | - | `none` | - | `app/api/chat/suggest/route.ts` |
| `/api/chat/title` | `POST` | - | `none` | - | `app/api/chat/title/route.ts` |
| `/api/check-ai/save` | `POST` | - | `none` | - | `app/api/check-ai/save/route.ts` |
| `/api/column/upload-image` | `POST` | - | `none` | - | `app/api/column/upload-image/route.ts` |
| `/api/get-payment-info` | `POST` | - | `none` | - | `app/api/get-payment-info/route.ts` |
| `/api/get-sorted-pharmacies` | `POST` | - | `none` | - | `app/api/get-sorted-pharmacies/route.ts` |
| `/api/health/nhis/fetch` | - | - | `none` | - | `app/api/health/nhis/fetch/route.ts` |
| `/api/health/nhis/init` | - | - | `none` | - | `app/api/health/nhis/init/route.ts` |
| `/api/health/nhis/sign` | - | - | `none` | - | `app/api/health/nhis/sign/route.ts` |
| `/api/health/nhis/status` | - | - | `none` | - | `app/api/health/nhis/status/route.ts` |
| `/api/health/nhis/unlink` | - | - | `none` | - | `app/api/health/nhis/unlink/route.ts` |
| `/api/home-data` | `GET` | - | `none` | - | `app/api/home-data/route.ts` |
| `/api/internal/warmup` | `GET` | - | `none` | - | `app/api/internal/warmup/route.ts` |
| `/api/logout` | - | - | `none` | Legacy logout compatibility route that clears session cookies. | `app/api/logout/route.ts` |
| `/api/orders-by-phone` | `POST` | - | `none` | - | `app/api/orders-by-phone/route.ts` |
| `/api/pharm-push/status` | `POST` | - | `none` | - | `app/api/pharm-push/status/route.ts` |
| `/api/pharm-push/unsubscribe` | `POST` | - | `none` | - | `app/api/pharm-push/unsubscribe/route.ts` |
| `/api/predict` | `POST` | - | `none` | - | `app/api/predict/route.ts` |
| `/api/product/names` | `GET` | - | `none` | - | `app/api/product/names/route.ts` |
| `/api/push/detach` | `POST` | - | `none` | - | `app/api/push/detach/route.ts` |
| `/api/push/status` | `POST` | - | `none` | - | `app/api/push/status/route.ts` |
| `/api/push/unsubscribe` | `POST` | - | `none` | - | `app/api/push/unsubscribe/route.ts` |
| `/api/results/latest` | `GET` | - | `none` | - | `app/api/results/latest/route.ts` |
| `/api/rider-push/status` | `POST` | - | `none` | - | `app/api/rider-push/status/route.ts` |
| `/api/rider-push/unsubscribe` | `POST` | - | `none` | - | `app/api/rider-push/unsubscribe/route.ts` |
| `/api/search-address` | `GET` | - | `none` | - | `app/api/search-address/route.ts` |
| `/api/user/all-results` | `GET` | - | `none` | - | `app/api/user/all-results/route.ts` |
| `/api/user/latest-results` | `GET` | - | `none` | - | `app/api/user/latest-results/route.ts` |
| `/api/user/profile` | - | - | `none` | - | `app/api/user/profile/route.ts` |
| `/api/verify-password` | `POST` | - | `none` | Admin password verification route that creates admin/test session. | `app/api/verify-password/route.ts` |

## Guarded Routes

| Route | Methods | Guards | Session Access | Note | File |
|---|---|---|---|---|---|
| `/api/admin/b2b/demo/seed` | `POST` | `requireAdminSession` | `route-auth-import` | - | `app/api/admin/b2b/demo/seed/route.ts` |
| `/api/admin/b2b/reports/export-batch` | `POST` | `requireAdminSession` | `route-auth-import` | - | `app/api/admin/b2b/reports/export-batch/route.ts` |
| `/api/admin/model` | - | `requireAdminSession` | `route-auth-import` | - | `app/api/admin/model/route.ts` |
| `/api/agent-playground/run` | `POST` | `requireAdminSession` | `route-auth-import` | - | `app/api/agent-playground/run/route.ts` |
| `/api/auth/email/send-otp` | `POST` | `requireUserSession` | `route-auth-import` | - | `app/api/auth/email/send-otp/route.ts` |
| `/api/auth/email/verify-otp` | `POST` | `requireUserSession` | `route-auth-import` | - | `app/api/auth/email/verify-otp/route.ts` |
| `/api/b2b/employee/sync` | - | `requireNhisSession` | `route-auth-import` | - | `app/api/b2b/employee/sync/route.ts` |
| `/api/column/editor/save` | `POST` | `requireAdminSession` | `route-auth-import` | - | `app/api/column/editor/save/route.ts` |
| `/api/me/link-phone` | `POST` | `requireUserSession` | `route-auth-import` | - | `app/api/me/link-phone/route.ts` |
| `/api/me/nickname/check` | `POST` | `requireUserSession` | `route-auth-import` | - | `app/api/me/nickname/check/route.ts` |
| `/api/me/phone-status` | - | `requireUserSession` | `route-auth-import` | - | `app/api/me/phone-status/route.ts` |
| `/api/me/profile` | `POST` | `requireUserSession` | `route-auth-import` | - | `app/api/me/profile/route.ts` |
| `/api/me/unlink-phone` | `POST` | `requireUserSession` | `route-auth-import` | - | `app/api/me/unlink-phone/route.ts` |
| `/api/messages/stream/token` | - | `requirePharmSession, requireRiderSession` | `route-auth-import` | - | `app/api/messages/stream/token/route.ts` |
| `/api/pharm-push/subscribe` | - | `requirePharmSession` | `route-auth-import` | - | `app/api/pharm-push/subscribe/route.ts` |
| `/api/push/send` | - | `requireCustomerOrderAccess` | `route-auth-import` | - | `app/api/push/send/route.ts` |
| `/api/push/subscribe` | - | `requireCustomerOrderAccess` | `route-auth-import` | - | `app/api/push/subscribe/route.ts` |
| `/api/rag/debug` | `GET` | `requireAdminSession` | `route-auth-import` | - | `app/api/rag/debug/route.ts` |
| `/api/rag/ingest` | `POST` | `requireAdminSession` | `route-auth-import` | - | `app/api/rag/ingest/route.ts` |
| `/api/rag/reindex` | `POST` | `requireAdminSession` | `route-auth-import` | - | `app/api/rag/reindex/route.ts` |
| `/api/rider-push/subscribe` | - | `requireRiderSession` | `route-auth-import` | - | `app/api/rider-push/subscribe/route.ts` |
